(function(n){"use strict";var t=!1;n("a[data-reveal-id]").live("click",function(t){t.preventDefault();var i=n(this).attr("data-reveal-id");n("#"+i).reveal(n(this).data())}),n.fn.reveal=function(i){var r={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:n.noop,opened:n.noop,close:n.noop,closed:n.noop};return i=n.extend({},r,i),this.each(function(){function c(){e=!1}function s(){e=!0}function l(){var r=n(".reveal-modal.open");r.length===1&&(t=!0,n(".reveal-modal.open").trigger("reveal:close"))}function a(){e||(s(),l(r),r.addClass("open"),i.animation==="fadeAndPop"&&(r.css({top:n(document).scrollTop()-o,opacity:0,visibility:"visible",display:"block"}),u.fadeIn(i.animationSpeed/2),r.delay(i.animationSpeed/2).animate({top:n(document).scrollTop()+f+"px",opacity:1},i.animationSpeed,function(){r.trigger("reveal:opened")})),i.animation==="fade"&&(r.css({opacity:0,visibility:"visible",display:"block",top:n(document).scrollTop()+f}),u.fadeIn(i.animationSpeed/2),r.delay(i.animationSpeed/2).animate({opacity:1},i.animationSpeed,function(){r.trigger("reveal:opened")})),i.animation==="none"&&(r.css({visibility:"visible",display:"block",top:n(document).scrollTop()+f}),u.css({display:"block"}),r.trigger("reveal:opened")))}function v(){e||(s(),r.removeClass("open"),i.animation==="fadeAndPop"&&(r.animate({top:n(document).scrollTop()-o+"px",opacity:0},i.animationSpeed/2,function(){r.css({top:f,opacity:1,visibility:"hidden",display:"none"})}),t?r.trigger("reveal:closed"):u.delay(i.animationSpeed).fadeOut(i.animationSpeed,function(){r.trigger("reveal:closed")}),t=!1),i.animation==="fade"&&(r.animate({opacity:0},i.animationSpeed,function(){r.css({opacity:1,visibility:"hidden",display:"none",top:f})}),t?r.trigger("reveal:closed"):u.delay(i.animationSpeed).fadeOut(i.animationSpeed,function(){r.trigger("reveal:closed")})),i.animation==="none"&&(r.css({visibility:"hidden",display:"block",top:f}),t||u.css({display:"none"}),r.trigger("reveal:closed")))}function y(){r.unbind(".reveal"),u.unbind(".reveal"),n("."+i.dismissModalClass).unbind(".reveal"),n("body").unbind(".reveal")}var r=n(this),f=parseInt(r.css("top"),10),o=r.height()+f,e=!1,u=n(".reveal-modal-bg"),h;u.length===0&&(u=n('<div class="reveal-modal-bg" />').insertAfter(r),u.fadeTo("fast",.8)),r.bind("reveal:open.reveal",a),r.bind("reveal:close.reveal",v),r.bind("reveal:opened.reveal reveal:closed.reveal",c),r.bind("reveal:closed.reveal",y),r.bind("reveal:open.reveal",i.open),r.bind("reveal:opened.reveal",i.opened),r.bind("reveal:close.reveal",i.close),r.bind("reveal:closed.reveal",i.closed),r.trigger("reveal:open"),h=n("."+i.dismissModalClass).bind("click.reveal",function(){r.trigger("reveal:close")}),i.closeOnBackgroundClick&&(u.css({cursor:"pointer"}),u.bind("click.reveal",function(){r.trigger("reveal:close")})),n("body").bind("keyup.reveal",function(n){n.which===27&&r.trigger("reveal:close")})})}})(jQuery);